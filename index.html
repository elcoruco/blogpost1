<!DOCTYPE html>
<html>
<head>
  <title>Yahoo</title>
</head>
<body>
<p>:D</p>
<div style="width:500px; height:500px; background:grey;" id="map"></div>
<script src="https://maps.googleapis.com/maps/api/js?libraries=geometry"></script>
<script src="d3.min.js"></script>
<script>
// http://prep-ine.appspot.com/api/v1/21/1745/seccion.json
// http://ubicatucasilla.ine.mx/api/casillas/21/1745/casillas.json
// datos para el distrito 5

var mapOptions = {
  center : {lat:19.2676, lng:-98.4239},
  zoom : 10,
  scrollwheel :false
},
element = document.getElementById("map"),
map     = new google.maps.Map(element, mapOptions);


var datos = [
{ municipio : "San Martín Texmelucan", poblacion : 141112, idh : 0.7872, pros :11656, from :1720, to : 1773, ine:133,inegi:132 },
{ municipio : "Tlahuapan", poblacion :  36518, idh : 0.7227, pros :665, from :2233, to : 2247, ine:180,inegi:180  },
{ municipio : "San Matías tlalancaleca", poblacion :  19310, idh : 0.742, pros :497, from :1775, to : 1783, ine:135,inegi:134  },
{ municipio : "San Salvador el Verde", poblacion :  28419, idh : 0.752, pros :847, from :1858, to : 1867, ine:144,inegi:143  },
{ municipio : "San Felipe Teotlalcingo", poblacion :  9426, idh : 0.7544, pros :227, from :1677, to : 1681, ine:123,inegi:122  },
{ municipio : "Chiautzingo", poblacion :  18762, idh : 0.7403, pros :392, from :415, to : 422 , ine:49,inegi:48 },
{ municipio : "Huejotzingo", poblacion :  63457, idh : 0.761, pros :4001, from :651, to : 672, ine:76,inegi:74  },
{ municipio : "Domingo Arenas", poblacion :  6946, idh : 0.7041, pros :83, from :515, to : 517, ine:61,inegi:60  },
{ municipio : "Calpan", poblacion :  13730, idh : 0.6862, pros :271, from :245, to : 252, ine:26,inegi:26  },
{ municipio : "San Nicolás de los Ranchos", poblacion :  10777, idh : 0.6884, pros :186 , from :1793, to : 1797, ine:139,inegi:138 },
{ municipio : "Nealtican", poblacion :  12011, idh : 0.732, pros :204, from :838, to : 841, ine:103,inegi:102  }
];


function add_section(city, section){
  d3.json("ine.php?section=" + section, function(error, json){
    if (error) return console.warn(error);
    if(city.sections){
      city.sections.push(json);
    }
    else{
      city.sections = [];
      city.sections.push(json);
    }

    draw_polygon(json.seccion[0].location.coordinates[0][0], map);
  });
}

function draw_polygon(poly, map){
  
  coords = google.maps.geometry.encoding.decodePath(poly);
  google_polygon = new google.maps.Polygon({
    paths: coords,
    strokeColor: '#FF3B77',
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: '#FF3B77',
   fillOpacity: 0.35
  });

  google_polygon.setMap(map);
  
}

</script>
</body>
</html>